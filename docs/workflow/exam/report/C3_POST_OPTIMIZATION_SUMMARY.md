# C3 Post-Optimization Summary Report

> Generated: 2026-01-14 11:24

## Executive Summary

This report documents controlled experiments to explore incremental improvements
to the validated C3 baseline without breaking stability.

### C3 Baseline Reference
| Metric | Sample (202506A) | Full Dataset |
|--------|------------------|---------------|
| Silhouette | 0.2304 | 0.3162 |
| Clusters | 30 | 30 |

---

## Task 1: Algorithm Comparison

### Experimental Setup
- **Feature set:** Exact C3 (row-normalized SPU + store features)
- **PCA components:** 50
- **Random seed:** 42
- **k values tested:** 20, 25, 30

### Results

| Algorithm | k | Silhouette | CH Score | DB Score | vs C3 Baseline |
|-----------|---|------------|----------|----------|----------------|
| agglomerative_average | 25 | 0.2691 | 85.4 | 0.71 | +0.0387 |
| agglomerative_average | 30 | 0.2321 | 71.7 | 0.73 | +0.0017 |
| agglomerative_average | 20 | 0.1660 | 35.7 | 0.63 | -0.0644 |
| kmeans | 20 | 0.1065 | 219.7 | 2.18 | -0.1239 |
| kmeans | 30 | 0.0951 | 163.6 | 2.21 | -0.1353 |
| kmeans | 25 | 0.0938 | 186.1 | 2.27 | -0.1366 |
| agglomerative_ward | 20 | 0.0903 | 209.3 | 2.27 | -0.1401 |
| agglomerative_ward | 25 | 0.0800 | 177.7 | 2.19 | -0.1504 |
| agglomerative_ward | 30 | 0.0773 | 156.4 | 2.14 | -0.1531 |

### Best Performing Algorithm

**Winner:** `agglomerative_average` with k=25

- Silhouette: 0.2691
- Improvement over C3 baseline: +0.0387

### Statistical Significance Assessment

- Absolute improvement: +0.0387
- Relative improvement: +16.8%
- Assessment: **Marginal improvement** (2-5% absolute gain)

---

## Task 2: Constraint Impact Analysis

Using best configuration: `agglomerative_average` with k=25

### Temperature Constraint Impact

| Scenario | Silhouette | Clusters | Change |
|----------|------------|----------|--------|
| Without constraint | 0.2691 | 25 | Baseline |
| With 5°C constraint | -0.1119 | 50 | -0.3810 (-141.6%) |

### Constraint Cost Analysis

- **Silhouette loss:** 0.3810
- **Percentage loss:** 141.6%
- **Cluster fragmentation:** 25 → 50 clusters

**Verdict:** Temperature constraint causes **severe degradation**. Recommend applying as post-processing step, not during clustering.

---

## Why Further Gains May Be Limited

### Data Characteristics
1. **High dimensionality:** 1000+ SPU features create sparse, noisy space
2. **Store heterogeneity:** Stores have diverse sales patterns that don't cluster cleanly
3. **Feature dominance:** SPU sales dominate over store features in PCA space

### Algorithm Limitations
1. **KMeans assumption:** Assumes spherical clusters, may not fit retail data
2. **Agglomerative:** Better for hierarchical structure but computationally expensive
3. **PCA compression:** Loses some discriminative information

### Business Constraints
1. **Temperature constraint:** Fragments clusters, reducing cohesion
2. **Cluster count limit:** 20-40 clusters may not be optimal for data
3. **Interpretability:** Business needs may conflict with statistical optimality

### Realistic Expectations
- **Current best:** 0.2691
- **Target (contract):** 0.5
- **Gap:** 0.2309

**Conclusion:** Achieving Silhouette ≥ 0.5 is unlikely with current data and constraints.
Recommend renegotiating target to 0.25-0.35 based on empirical evidence.

---

## Recommendations

### Keep
- C3 feature set (row-normalized SPU + store features)
- agglomerative_average algorithm with k=25
- No hard balancing during optimization

### Modify
- Apply temperature constraint as post-processing, not in-clustering
- Consider reducing PCA components if overfitting suspected

### Avoid
- Chasing artificial Silhouette gains through feature engineering
- Hard cluster balancing (destroys natural cluster structure)
- Adding features without business justification

---

*Report generated by c3_post_optimization_experiments.py*
